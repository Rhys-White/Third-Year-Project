pip install camb
import numpy as np
from camb import model, initialpower
from astropy.table import Table
from matplotlib import pyplot as pylt
from matplotlib import rc

H0_set = np.linspace(50, 90, 5)
H0_set = np.append(H0_set, [67.])

for H0_plot in H0_set:
 pars = camb.set_params(H0=H0_plot, ombh2= 0.02233, omch2= 0.1198, mnu= 0.06, omk= 0, tau= 0.06,
                        As=2.1e-9, ns= 0.965, halofit_version= 'mead', lmax= 6000)
 results = camb.get_results(pars)
 powers = results.get_cmb_power_spectra(pars, CMB_unit='muK')
 all_cls = powers['total']
 ells = np.arrange(all_cls.shape[0])
 cl_tt = all_cls[:,0]
 if H0_plot == 67.:
  continue
 else:
  plt.plot(ells, cl_tt, label= f'$H_0 = {H0_plot:.1f}$')

planck = Table.read('COM_PowerSpect_CMB_R2.02.fits', hdu=7)
planck_lowell = Table.read('COM_PowerSpect_CMB_R2.02.fits', hdu=1)
plt.errorbar(planck['ELL'], planck['D_ELL'], yerr=planck['ERR'], fmt='o', markersize=2, capsize=3, color='k', label='\emph{Planck} 2018 Data')
plt.errorbar(planck_lowell['ELL'], planck_lowell['D_ELL'], yerr=[planck_lowell['ERRDOWN'], planck_lowell['errup']], fmt='o', markersize=2, capsize=3, label=none, color='k')

plt.legend(fontsize='small')
plt.xscale('log')
plt.yscale('log')
plt.xlabel('$1$')
plt.ylabel('$\mathcal{D}_1$')
plt.xlim([2,6000])
plt.ylim([1.e1, 1.e4])
plt.savefig('./cmb_example_plot.png', dpi=300, bbox_inches='tight')
